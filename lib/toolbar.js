/**
 * Initialize toolbar
 */
(function () {
  'use strict';
  var defaultButtons = [
    {
      name: "select",
      title: "Select/move object (V)",
      icon: `<svg width="180" height="186" viewBox="0 0 180 186" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M155.959 58.892L152.384 67.6938L155.958 58.8919L40.2504 11.9013L36.6759 20.7031L40.2504 11.9013C24.1037 5.34389 7.20154 19.5264 10.8555 36.5665L37.0398 158.677L46.2891 156.694L37.0398 158.677C41.3632 178.839 68.721 182.181 77.7723 163.655L77.7724 163.654L101.605 114.87L153.787 99.8695C173.606 94.1727 175.063 66.6507 155.959 58.892Z" fill="#425FF8" stroke="black" stroke-width="19"/>
</svg>

`,
    },
    {
      name: "shapes",
      title: "Shapes",
      icon: `<svg width="140" height="140" viewBox="0 0 140 140" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M79.0547 87.6223V126.933C79.0547 131.665 82.8899 135.5 87.6214 135.5H126.933C131.664 135.5 135.499 131.665 135.499 126.933V87.6223C135.499 82.8909 131.664 79.0557 126.933 79.0557H87.6214C82.8899 79.0557 79.0547 82.8909 79.0547 87.6223Z" fill="#425FF8" stroke="black" stroke-width="9"/>
<path d="M4.5 87.6223V126.933C4.5 131.665 8.33558 135.5 13.0667 135.5H52.3778C57.1089 135.5 60.9445 131.665 60.9445 126.933V87.6223C60.9445 82.8908 57.1089 79.0557 52.3778 79.0557H13.0667C8.33558 79.0557 4.5 82.8908 4.5 87.6223Z" fill="#425FF8" stroke="black" stroke-width="9"/>
<path d="M79.0547 13.0667V52.3778C79.0547 57.1089 82.8898 60.9445 87.6214 60.9445H126.933C131.664 60.9445 135.499 57.1089 135.499 52.3778V13.0667C135.499 8.33558 131.664 4.5 126.933 4.5H87.6214C82.8898 4.5 79.0547 8.33558 79.0547 13.0667Z" fill="#425FF8" stroke="black" stroke-width="9"/>
<path d="M4.5 13.0667V52.3778C4.5 57.1091 8.33543 60.9445 13.0667 60.9445H52.3778C57.1091 60.9445 60.9445 57.1091 60.9445 52.3778V13.0667C60.9445 8.33543 57.1091 4.5 52.3778 4.5H13.0667C8.33543 4.5 4.5 8.33543 4.5 13.0667Z" fill="#425FF8" stroke="black" stroke-width="9"/>
</svg>

`,
    },
    {
      name: "line",
      title: "Line",
      icon: `<svg width="191" height="181" viewBox="0 0 191 181" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M47 132L145 47" stroke="black" stroke-width="19" stroke-linecap="round"/>
<rect x="143.5" y="7.5" width="40" height="41" rx="8.5" fill="#425FF8" stroke="black" stroke-width="15"/>
<rect x="7.5" y="132.5" width="40" height="41" rx="8.5" fill="#425FF8" stroke="black" stroke-width="15"/>
</svg>
`,
    },
    {
      name: "path",
      title: "Connectable lines & curves",
      icon: '<svg width="308" height="308" viewBox="0 0 308 308" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M83.5 76.5L178.5 55.5L258.5 116L225 228.5L12.5 290L83.5 76.5Z" fill="#425FF8" stroke="black" stroke-width="8"/><path fill-rule="evenodd" clip-rule="evenodd" d="M202.726 3.1707C203.729 2.16563 204.92 1.36822 206.231 0.824142C207.542 0.280061 208.948 0 210.367 0C211.787 0 213.193 0.280061 214.504 0.824142C215.815 1.36822 217.006 2.16563 218.008 3.1707L304.348 89.5107C305.354 90.5132 306.151 91.7042 306.695 93.0154C307.239 94.3265 307.519 95.7322 307.519 97.1518C307.519 98.5714 307.239 99.977 306.695 101.288C306.151 102.599 305.354 103.79 304.348 104.793L263.294 145.848L245.4 217.359C244.039 222.804 241.286 227.802 237.411 231.862C233.536 235.922 228.672 238.906 223.297 240.519L0 307.519L66.9998 84.2008C68.6148 78.8317 71.5962 73.9741 75.6524 70.1033C79.7085 66.2326 84.7003 63.4815 90.1389 62.1193L161.65 44.247L202.726 3.1707ZM163.873 65.9399L95.3841 83.0568C93.566 83.5105 91.8975 84.4298 90.5425 85.7242C89.1876 87.0186 88.193 88.6434 87.6567 90.4388L32.1832 275.314L217.102 219.841C218.887 219.3 220.501 218.306 221.787 216.955C223.073 215.605 223.988 213.944 224.441 212.135L241.579 143.624L163.873 65.9399Z" fill="black"/><path d="M115.667 179.5C115.667 191.282 125.218 200.833 137 200.833C148.782 200.833 158.333 191.282 158.333 179.5C158.333 167.718 148.782 158.167 137 158.167C125.218 158.167 115.667 167.718 115.667 179.5ZM30.1974 282.454L139.697 182.454L134.303 176.546L24.8026 276.546L30.1974 282.454Z" fill="black"/></svg>',
    },
    {
      name: "textbox",
      title: "Text box",
      icon: `<svg width="63" height="55" viewBox="0 0 63 55" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="8.5" cy="27.5" r="5.5" fill="#425FF8"/>
<circle cx="54.5" cy="27.5" r="5.5" fill="#425FF8"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M6.47679 6.6355C6.47679 5.09951 7.08696 3.62643 8.17307 2.54033C9.25917 1.45422 10.7322 0.844055 12.2682 0.844055H50.8778C52.4138 0.844055 53.8869 1.45422 54.973 2.54033C56.0591 3.62643 56.6693 5.09951 56.6693 6.6355V20.3921C58.3286 20.8187 59.7989 21.7851 60.8487 23.139C61.8986 24.4929 62.4683 26.1575 62.4683 27.8708C62.4683 29.584 61.8986 31.2487 60.8487 32.6026C59.7989 33.9565 58.3286 34.9228 56.6693 35.3495V49.1061C56.6693 50.642 56.0591 52.1151 54.973 53.2012C53.8869 54.2873 52.4138 54.8975 50.8778 54.8975H12.2682C10.7322 54.8975 9.25917 54.2873 8.17307 53.2012C7.08696 52.1151 6.47679 50.642 6.47679 49.1061V35.3495C4.8175 34.9228 3.3472 33.9565 2.29735 32.6026C1.2475 31.2487 0.677734 29.584 0.677734 27.8708C0.677734 26.1575 1.2475 24.4929 2.29735 23.139C3.3472 21.7851 4.8175 20.8187 6.47679 20.3921V6.6355ZM10.3378 20.3921C11.9971 20.8187 13.4674 21.7851 14.5172 23.139C15.567 24.4929 16.1368 26.1575 16.1368 27.8708C16.1368 29.584 15.567 31.2487 14.5172 32.6026C13.4674 33.9565 11.9971 34.9228 10.3378 35.3495V49.1061C10.3378 49.6181 10.5411 50.1091 10.9032 50.4711C11.2652 50.8332 11.7562 51.0365 12.2682 51.0365H50.8778C51.3898 51.0365 51.8809 50.8332 52.2429 50.4711C52.6049 50.1091 52.8083 49.6181 52.8083 49.1061V35.3495C51.149 34.9228 49.6787 33.9565 48.6289 32.6026C47.579 31.2487 47.0093 29.584 47.0093 27.8708C47.0093 26.1575 47.579 24.4929 48.6289 23.139C49.6787 21.7851 51.149 20.8187 52.8083 20.3921V6.6355C52.8083 6.1235 52.6049 5.63248 52.2429 5.27044C51.8809 4.90841 51.3898 4.70502 50.8778 4.70502H12.2682C11.7562 4.70502 11.2652 4.90841 10.9032 5.27044C10.5411 5.63248 10.3378 6.1235 10.3378 6.6355V20.3921ZM8.40727 24.0098C7.38328 24.0098 6.40123 24.4166 5.67716 25.1407C4.95309 25.8647 4.54631 26.8468 4.54631 27.8708C4.54631 28.8948 4.95309 29.8768 5.67716 30.6009C6.40123 31.325 7.38328 31.7317 8.40727 31.7317C9.43126 31.7317 10.4133 31.325 11.1374 30.6009C11.8615 29.8768 12.2682 28.8948 12.2682 27.8708C12.2682 26.8468 11.8615 25.8647 11.1374 25.1407C10.4133 24.4166 9.43126 24.0098 8.40727 24.0098ZM54.7388 24.0098C53.7148 24.0098 52.7328 24.4166 52.0087 25.1407C51.2846 25.8647 50.8778 26.8468 50.8778 27.8708C50.8778 28.8948 51.2846 29.8768 52.0087 30.6009C52.7328 31.325 53.7148 31.7317 54.7388 31.7317C55.7628 31.7317 56.7448 31.325 57.4689 30.6009C58.193 29.8768 58.5998 28.8948 58.5998 27.8708C58.5998 26.8468 58.193 25.8647 57.4689 25.1407C56.7448 24.4166 55.7628 24.0098 54.7388 24.0098Z" fill="black"/>
<path d="M44.8344 12.4269H18.3173L18.0625 20.1257H19.5528C20.3636 15.2918 21.9157 14.5427 27.9427 14.3536L29.267 14.3111V38.8012C29.267 40.8745 28.8191 41.3687 25.2169 41.6892V43.3146H37.9349V41.6892C34.3133 41.3687 33.8654 40.8784 33.8654 38.8012V14.3111L35.209 14.3497C41.2321 14.5427 42.7881 15.2918 43.5989 20.1257H45.0892L44.8344 12.4269Z" fill="black"/>
</svg>
`,
    },
    {
      name: "upload",
      title: "Upload image",
      icon: `<svg width="11" height="10" viewBox="0 0 11 10" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M0.576824 6.466C0.659359 6.466 0.738514 6.49879 0.796875 6.55715C0.855236 6.61551 0.888023 6.69467 0.888023 6.7772V8.3332C0.888023 8.49827 0.953597 8.65658 1.07032 8.7733C1.18704 8.89002 1.34535 8.9556 1.51042 8.9556H8.9792C9.14427 8.9556 9.30258 8.89002 9.4193 8.7733C9.53602 8.65658 9.60159 8.49827 9.60159 8.3332V6.7772C9.60159 6.69467 9.63438 6.61551 9.69274 6.55715C9.7511 6.49879 9.83026 6.466 9.91279 6.466C9.99533 6.466 10.0745 6.49879 10.1328 6.55715C10.1912 6.61551 10.224 6.69467 10.224 6.7772V8.3332C10.224 8.66334 10.0928 8.97996 9.8594 9.2134C9.62596 9.44685 9.30934 9.57799 8.9792 9.57799H1.51042C1.18028 9.57799 0.863662 9.44685 0.630217 9.2134C0.396773 8.97996 0.265625 8.66334 0.265625 8.3332V6.7772C0.265625 6.69467 0.298412 6.61551 0.356773 6.55715C0.415134 6.49879 0.494289 6.466 0.576824 6.466Z" fill="black"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M5.02486 1.01751C5.05377 0.988532 5.08811 0.965539 5.12592 0.94985C5.16373 0.934162 5.20426 0.926086 5.24519 0.926086C5.28613 0.926086 5.32666 0.934162 5.36446 0.94985C5.40227 0.965539 5.43661 0.988532 5.46552 1.01751L7.33272 2.88471C7.39115 2.94314 7.42398 3.0224 7.42398 3.10504C7.42398 3.18767 7.39115 3.26693 7.33272 3.32536C7.27428 3.3838 7.19503 3.41663 7.11239 3.41663C7.02975 3.41663 6.95049 3.3838 6.89206 3.32536L5.55639 1.98908V7.46182C5.55639 7.54436 5.5236 7.62351 5.46524 7.68187C5.40688 7.74023 5.32773 7.77302 5.24519 7.77302C5.16266 7.77302 5.0835 7.74023 5.02514 7.68187C4.96678 7.62351 4.93399 7.54436 4.93399 7.46182V1.98908L3.59833 3.32536C3.56939 3.3543 3.53504 3.37725 3.49724 3.39291C3.45944 3.40857 3.41892 3.41663 3.378 3.41663C3.33708 3.41663 3.29656 3.40857 3.25876 3.39291C3.22095 3.37725 3.1866 3.3543 3.15767 3.32536C3.12874 3.29643 3.10578 3.26208 3.09012 3.22428C3.07447 3.18647 3.06641 3.14595 3.06641 3.10504C3.06641 3.06412 3.07447 3.0236 3.09012 2.98579C3.10578 2.94799 3.12874 2.91364 3.15767 2.88471L5.02486 1.01751Z" fill="black"/>
</svg>
`,
    },
    {
      name: "background",
      title: "Canvas option",
      icon: `<svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M5.50016 1.01177C5.34704 0.492036 4.61132 0.492036 4.4582 1.01177L4.39969 1.21033C4.35049 1.37711 4.2646 1.53077 4.14831 1.66005C4.03203 1.78934 3.8883 1.89097 3.72764 1.95751C3.56699 2.02405 3.39349 2.05381 3.21985 2.04461C3.0462 2.03541 2.87682 1.98749 2.72409 1.90435L2.54234 1.80476C2.0668 1.54644 1.54644 2.06618 1.80538 2.54234L1.90435 2.72409C1.98749 2.87682 2.03541 3.0462 2.04461 3.21985C2.05381 3.39349 2.02405 3.56699 1.95751 3.72764C1.89097 3.8883 1.78934 4.03203 1.66005 4.14831C1.53077 4.2646 1.37711 4.35049 1.21033 4.39969L1.01177 4.4582C0.492036 4.61132 0.492036 5.34704 1.01177 5.50016L1.21033 5.55867C1.37719 5.60786 1.53094 5.69376 1.66029 5.81009C1.78964 5.92642 1.89131 6.07022 1.95786 6.23095C2.02441 6.39168 2.05415 6.56527 2.04489 6.73899C2.03563 6.91271 1.9876 7.08215 1.90435 7.2349L1.80476 7.41602C1.54644 7.89157 2.06618 8.41192 2.54234 8.15299L2.72409 8.05402C2.87686 7.97089 3.04629 7.92299 3.21996 7.91383C3.39364 7.90467 3.56717 7.93448 3.72783 8.00108C3.88849 8.06769 4.03221 8.16939 4.14846 8.29875C4.26472 8.4281 4.35056 8.58183 4.39969 8.74866L4.4582 8.9466C4.61132 9.46633 5.34704 9.46633 5.50016 8.9466L5.55867 8.74804C5.60786 8.58117 5.69376 8.42743 5.81009 8.29808C5.92642 8.16873 6.07022 8.06705 6.23095 8.00051C6.39168 7.93396 6.56527 7.90422 6.73899 7.91348C6.91271 7.92274 7.08215 7.97076 7.2349 8.05402L7.41602 8.15361C7.89157 8.41192 8.41192 7.89219 8.15299 7.41602L8.05402 7.2349C7.97077 7.08211 7.92277 6.91262 7.91355 6.73887C7.90433 6.56512 7.93412 6.39151 8.00073 6.23077C8.06734 6.07003 8.16909 5.92624 8.29851 5.80994C8.42793 5.69364 8.58174 5.60779 8.74866 5.55867L8.9466 5.50016C9.46633 5.34704 9.46633 4.61132 8.9466 4.4582L8.74804 4.39969C8.58126 4.35049 8.4276 4.2646 8.29832 4.14831C8.16903 4.03203 8.0674 3.8883 8.00086 3.72764C7.93432 3.56699 7.90456 3.39349 7.91375 3.21985C7.92295 3.0462 7.97088 2.87682 8.05402 2.72409L8.15361 2.54234C8.41192 2.0668 7.89219 1.54644 7.41602 1.80538L7.2349 1.90435C7.08212 1.98772 6.91263 2.03584 6.73883 2.04516C6.56504 2.05448 6.39137 2.02477 6.23056 1.95821C6.06975 1.89166 5.92587 1.78994 5.8095 1.66052C5.69313 1.53111 5.60721 1.37728 5.55805 1.21033L5.50016 1.01177ZM3.86129 0.835621C4.18931 -0.27854 5.76906 -0.27854 6.09708 0.835621L6.15559 1.03418C6.1785 1.11195 6.21852 1.18362 6.27272 1.24391C6.32692 1.30421 6.39393 1.35162 6.46884 1.38265C6.54374 1.41369 6.62464 1.42757 6.7056 1.42328C6.78657 1.41898 6.86555 1.39663 6.93675 1.35785L7.1185 1.25826C8.1393 0.703043 9.25595 1.81907 8.69949 2.83987L8.60052 3.02162C8.56174 3.09282 8.53938 3.1718 8.53509 3.25276C8.5308 3.33373 8.54468 3.41463 8.57572 3.48953C8.60675 3.56443 8.65416 3.63144 8.71445 3.68565C8.77475 3.73985 8.84641 3.77987 8.92419 3.80278L9.12275 3.86129C10.2369 4.18931 10.2369 5.76906 9.12275 6.09708L8.92419 6.15559C8.84641 6.1785 8.77475 6.21852 8.71445 6.27272C8.65416 6.32692 8.60675 6.39393 8.57572 6.46884C8.54468 6.54374 8.5308 6.62464 8.53509 6.7056C8.53938 6.78657 8.56174 6.86555 8.60052 6.93675L8.70011 7.1185C9.25595 8.1393 8.13867 9.25595 7.1185 8.69949L6.93675 8.60052C6.86555 8.56174 6.78657 8.53938 6.7056 8.53509C6.62464 8.5308 6.54374 8.54468 6.46884 8.57572C6.39393 8.60675 6.32692 8.65416 6.27272 8.71445C6.21852 8.77475 6.1785 8.84641 6.15559 8.92419L6.09708 9.12275C5.76906 10.2369 4.18931 10.2369 3.86129 9.12275L3.80278 8.92419C3.77987 8.84641 3.73985 8.77475 3.68565 8.71445C3.63144 8.65416 3.56443 8.60675 3.48953 8.57572C3.41463 8.54468 3.33373 8.5308 3.25276 8.53509C3.1718 8.53938 3.09282 8.56174 3.02162 8.60052L2.83987 8.70011C1.81907 9.25595 0.703042 8.13867 1.25888 7.1185L1.35785 6.93675C1.39663 6.86555 1.41898 6.78657 1.42328 6.7056C1.42757 6.62464 1.41369 6.54374 1.38265 6.46884C1.35162 6.39393 1.30421 6.32692 1.24391 6.27272C1.18362 6.21852 1.11195 6.1785 1.03418 6.15559L0.835621 6.09708C-0.27854 5.76906 -0.27854 4.18931 0.835621 3.86129L1.03418 3.80278C1.11195 3.77987 1.18362 3.73985 1.24391 3.68565C1.30421 3.63144 1.35162 3.56443 1.38265 3.48953C1.41369 3.41463 1.42757 3.33373 1.42328 3.25276C1.41898 3.1718 1.39663 3.09282 1.35785 3.02162L1.25826 2.83987C0.703043 1.81907 1.81969 0.703042 2.83987 1.25888L3.02162 1.35785C3.09282 1.39663 3.1718 1.41898 3.25276 1.42328C3.33373 1.42757 3.41463 1.41369 3.48953 1.38265C3.56443 1.35162 3.63144 1.30421 3.68565 1.24391C3.73985 1.18362 3.77987 1.11195 3.80278 1.03418L3.86129 0.835621Z" fill="black"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M4.97941 3.58112C4.60864 3.58112 4.25306 3.7284 3.99088 3.99058C3.72871 4.25275 3.58142 4.60834 3.58142 4.97911C3.58142 5.34988 3.72871 5.70547 3.99088 5.96764C4.25306 6.22981 4.60864 6.3771 4.97941 6.3771C5.35019 6.3771 5.70577 6.22981 5.96794 5.96764C6.23012 5.70547 6.37741 5.34988 6.37741 4.97911C6.37741 4.60834 6.23012 4.25275 5.96794 3.99058C5.70577 3.7284 5.35019 3.58112 4.97941 3.58112ZM2.95898 4.97911C2.95898 4.71378 3.01124 4.45105 3.11278 4.20592C3.21432 3.96079 3.36314 3.73806 3.55075 3.55045C3.73837 3.36284 3.9611 3.21401 4.20623 3.11248C4.45136 3.01094 4.71409 2.95868 4.97941 2.95868C5.24474 2.95868 5.50747 3.01094 5.7526 3.11248C5.99773 3.21401 6.22046 3.36284 6.40807 3.55045C6.59569 3.73806 6.74451 3.96079 6.84605 4.20592C6.94758 4.45105 6.99984 4.71378 6.99984 4.97911C6.99984 5.51496 6.78698 6.02887 6.40807 6.40777C6.02917 6.78667 5.51527 6.99954 4.97941 6.99954C4.44356 6.99954 3.92966 6.78667 3.55075 6.40777C3.17185 6.02887 2.95898 5.51496 2.95898 4.97911Z" fill="black"/>
</svg>
`,
    },
  ];

  const defaultExtendedButtons = [{
    name: 'undo',
    title: 'Undo',
    icon: `<svg id="Capa_1" x="0px" y="0px" viewBox="0 0 512.011 512.011" xml:space="preserve"><path d="M511.136,286.255C502.08,194.863,419.84,128.015,328,128.015H192v-80c0-6.144-3.52-11.744-9.056-14.432 c-5.568-2.656-12.128-1.952-16.928,1.92l-160,128C2.208,166.575,0,171.151,0,176.015s2.208,9.44,5.984,12.512l160,128 c2.912,2.304,6.464,3.488,10.016,3.488c2.368,0,4.736-0.512,6.944-1.568c5.536-2.688,9.056-8.288,9.056-14.432v-80h139.392 c41.856,0,80,30.08,84.192,71.712c4.832,47.872-32.704,88.288-79.584,88.288H208c-8.832,0-16,7.168-16,16v64 c0,8.832,7.168,16,16,16h128C438.816,480.015,521.472,391.151,511.136,286.255z"></path></svg>`
  }, {
    name: 'redo',
    title: 'Redo',
    icon: `<svg id="Capa_1" x="0px" y="0px" viewBox="0 0 512.011 512.011" xml:space="preserve" style="transform: scale(-1, 1);"><path d="M511.136,286.255C502.08,194.863,419.84,128.015,328,128.015H192v-80c0-6.144-3.52-11.744-9.056-14.432             c-5.568-2.656-12.128-1.952-16.928,1.92l-160,128C2.208,166.575,0,171.151,0,176.015s2.208,9.44,5.984,12.512l160,128             c2.912,2.304,6.464,3.488,10.016,3.488c2.368,0,4.736-0.512,6.944-1.568c5.536-2.688,9.056-8.288,9.056-14.432v-80h139.392             c41.856,0,80,30.08,84.192,71.712c4.832,47.872-32.704,88.288-79.584,88.288H208c-8.832,0-16,7.168-16,16v64             c0,8.832,7.168,16,16,16h128C438.816,480.015,521.472,391.151,511.136,286.255z"></path></svg>`
  }, {
    name: 'save',
    title: 'Save',
    icon: `<svg id="Capa_1" x="0px" y="0px" width="128px" height="128px" viewBox="0 0 490.434 490.433" xml:space="preserve"><g><path d="M472.003,58.36l-13.132-11.282c-21.798-18.732-54.554-16.644-73.799,4.697L165.39,295.359l-66.312-57.112 c-21.775-18.753-54.536-16.707-73.804,4.611l-11.611,12.848c-9.416,10.413-14.305,24.149-13.595,38.18 c0.717,14.023,6.973,27.188,17.402,36.6l121.553,111.311c10.524,9.883,24.628,15.037,39.044,14.272 c14.416-0.763,27.894-7.386,37.311-18.329l262.245-304.71c9.162-10.646,13.717-24.494,12.661-38.496 C489.229,80.522,482.655,67.512,472.003,58.36z"></path></g></svg>`
  }, {
    name: 'download',
    title: 'Download',
    icon: `<svg id="Capa_1" x="0px" y="0px" width="128px" height="128px" viewBox="0 0 512.171 512.171" xml:space="preserve"><g><g><path d="M479.046,283.925c-1.664-3.989-5.547-6.592-9.856-6.592H352.305V10.667C352.305,4.779,347.526,0,341.638,0H170.971 c-5.888,0-10.667,4.779-10.667,10.667v266.667H42.971c-4.309,0-8.192,2.603-9.856,6.571c-1.643,3.989-0.747,8.576,2.304,11.627 l212.8,213.504c2.005,2.005,4.715,3.136,7.552,3.136s5.547-1.131,7.552-3.115l213.419-213.504 C479.793,292.501,480.71,287.915,479.046,283.925z"></path></g></g></svg>`
  }, {
    name: 'clear',
    title: 'Clear',
    icon: `<svg width="128px" height="128px" viewBox="0 0 365.696 365.696"><path d="m243.1875 182.859375 113.132812-113.132813c12.5-12.5 12.5-32.765624 0-45.246093l-15.082031-15.082031c-12.503906-12.503907-32.769531-12.503907-45.25 0l-113.128906 113.128906-113.132813-113.152344c-12.5-12.5-32.765624-12.5-45.246093 0l-15.105469 15.082031c-12.5 12.503907-12.5 32.769531 0 45.25l113.152344 113.152344-113.128906 113.128906c-12.503907 12.503907-12.503907 32.769531 0 45.25l15.082031 15.082031c12.5 12.5 32.765625 12.5 45.246093 0l113.132813-113.132812 113.128906 113.132812c12.503907 12.5 32.769531 12.5 45.25 0l15.082031-15.082031c12.5-12.503906 12.5-32.769531 0-45.25zm0 0"></path></svg>`
  }]

  var toolbar = function () {
    const _self = this;
    let buttons = [];
    let extendedButtons = [];

    if (Array.isArray(this.buttons) && this.buttons.length) {
      defaultButtons.forEach(item => {
        if (this.buttons.includes(item.name)) buttons.push(item);
      });
      defaultExtendedButtons.forEach(item => {
        if (this.buttons.includes(item.name)) extendedButtons.push(item);
      })
    } else {
      buttons = defaultButtons;
      extendedButtons = defaultExtendedButtons;
    }
    
    try {
      this.containerEl.append(`<div class="toolbar" id="toolbar"><div class="main-buttons"></div><div class="extended-buttons"></div></div>`);
      
      // main buttons
      (() => {
        buttons.forEach(item => {
          $(`${this.containerSelector} #toolbar .main-buttons`).append(`<button id="${item.name}">${item.icon}</button>`);
        })

        $(`${this.containerSelector} #toolbar .main-buttons button`).click(function () {
          let id = $(this).attr('id');

          $(`${_self.containerSelector} #toolbar button`).removeClass('active');
          $(`${_self.containerSelector} #toolbar button#${id}`).addClass('active');
          _self.setActiveTool(id);
        })
      })();

      // zoom
      (() => {
        let currentZoomLevel = 1;
        $(`${this.containerSelector}`).append(
          `<div class="floating-zoom-level-container"></div>`
        )
        $(`${this.containerSelector} .floating-zoom-level-container`).append(`
          <label>Zoom</label>
          <select id="input-zoom-level">
            ${[0.05, 0.1, 0.25, 0.5, 0.75, 1, 1.5, 2, 2.5, 3].map((item => 
              `<option value="${item}" ${item === currentZoomLevel ? 'selected':''}>${item*100}%</option>`
              ))}
          </select>
        `);
        $(`${this.containerSelector} .floating-zoom-level-container #input-zoom-level`).change(function () {
          let zoom = parseFloat($(this).val());
          typeof _self.applyZoom === 'function' && _self.applyZoom(zoom)
        })
      })();
      // extended buttons
      (() => {
        extendedButtons.forEach(item => {
          $(`${this.containerSelector} #toolbar .extended-buttons`).append(`<button id="${item.name}">${item.icon}</button>`);
        })

        $(`${this.containerSelector} #toolbar .extended-buttons button`).click(function () {
          let id = $(this).attr('id');
          if (id === 'save') {
            if (window.confirm('The current canvas will be saved in your local! Are you sure?')) {
              saveInBrowser.save('canvasEditor', _self.canvas.toJSON());
            }
          } else if (id === 'clear') {
            if (window.confirm('This will clear the canvas! Are you sure?')) {
              _self.canvas.clear(), saveInBrowser.remove('canvasEditor');
            }
          } else if (id === 'download') {
            $('body').append(`<div class="custom-modal-container">
              <div class="custom-modal-content">
                <div class="button-download" id="svg">Download as SVG</div>
                <div class="button-download" id="png">Download as PNG</div>
                <div class="button-download" id="jpg">Download as JPG</div>
              </div>
            </div>`)

            $(".custom-modal-container").click(function () {
              $(this).remove();
            })

            $(".custom-modal-container .button-download").click(function (e) {
              let type = $(this).attr('id');
              if (type === 'svg') downloadSVG(_self.canvas.toSVG());
              else if (type === 'png') downloadImage(_self.canvas.toDataURL())
              else if (type === 'jpg') downloadImage(_self.canvas.toDataURL({
                format: 'jpeg'
              }), 'jpg', 'image/jpeg');
            })

          } else if (id === 'undo') _self.undo();
          else if (id === 'redo') _self.redo();
        })
      })()
    } catch (_) {
      console.error("can't create toolbar");
    }
  }

  window.ImageEditor.prototype.initializeToolbar = toolbar;
})();